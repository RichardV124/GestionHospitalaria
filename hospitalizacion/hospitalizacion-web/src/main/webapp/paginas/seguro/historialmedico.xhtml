<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui" template="/templates/index.xhtml">

	<ui:define name="cuerpo">
		<h:form preprpenId="false">

			<p:panel id="buspacientehistorialpaciente" header="Historia clinica"
				style="margin-bottom:20px">

				<h:panelGrid id="buscarhistorial" columns="3">
					<p:outputLabel id="lblcedulahistorial" value="Cedula del paciente:" />
					<p:inputText id="tfcedulahistorial"
						value="#{historialController.documentoBuscar}" />
					<p:commandButton styleClass="ui-priority-primary" value="Buscar"
						process="@this tfcedulahistorial " update="" action="#{historialController.buscarHistorial}" />

					<p:outputLabel id="lblnombrehistorial" value="Nombre del paciente:" />
					<br />
					<br />
					<p:outputLabel id="lblnombremostrarhistorial"
						value="    #{historialController.nombrePaciente}" />


				</h:panelGrid>

				<br />
				<br />

				<p:accordionPanel>

					<p:tab title="Citas">

						<h:panelGrid id="citashistorial" columns="4">

							<p:dataTable id="tablaCitaskk"
								value="#{historialController.citas}" var="cit" border="1">
								<p:column>
									<f:facet name="header">
					Fecha
				</f:facet>
									<!-- El label es el valor del atributo -->
									<h:outputLabel value="#{cit.fecha}" />
								</p:column>

								<p:column>
									<f:facet name="header">
					Hora
				</f:facet>
									<h:outputLabel value="#{cit.hora}" />
								</p:column>

								<p:column>
									<f:facet name="header">
					Medico
				</f:facet>
									<h:outputLabel value="#{cit.nombreMedico}" />
								</p:column>

								<p:column headerText="Opciones">
									<p:commandButton action="#{historialController.verCita(cit)}"
										process="@this" value="Ver cita"
										update="buspacientehistorialpaciente" />
								</p:column>
							</p:dataTable>

							<p:panel id="panelanotacioncita" header="Anotaciones de la cita"
								style="margin-left:20px">

								<p:inputTextarea id="tfanotacioncita"
									value="#{historialController.anotaciones}" />

							</p:panel>

							<p:panel id="panelmedicamentoscita"
								header="Medicamentos recetados" style="margin-left:20px">

								<p:dataTable id="tablaMedicamentoskk"
									value="#{historialController.medicamentos}" var="med"
									border="1">
									<p:column>
										<f:facet name="header">
					Medicamento
				</f:facet>
										<!-- El label es el valor del atributo -->
										<h:outputLabel value="#{med.medicamentoDescripcion}" />
									</p:column>

									<p:column>
										<f:facet name="header">
					Cantidad
				</f:facet>
										<h:outputLabel value="#{med.cantidad}" />
									</p:column>

								</p:dataTable>


							</p:panel>

						</h:panelGrid>
					</p:tab>

				</p:accordionPanel>


				<h:panelGrid id="examenfermedadhistorial" columns="2">
					<p:accordionPanel>

						<p:tab title="Examenes">

							<h:panelGrid id="examhistorialkk" columns="2">

								<p:dataTable id="tablaExamenHistorial"
									value="#{historialController.examenes}" var="ex" border="1">
									<p:column>
										<f:facet name="header">
					Examen
				</f:facet>
										<!-- El label es el valor del atributo -->
										<h:outputLabel value="#{ex.nombreExamen}" />
									</p:column>

									<p:column headerText="Opciones">
										<p:commandButton
											action="#{historialController.verResultadosExamen(ex)}"
											process="@this" value="Ver resultados"
											update="resultadoexamenhistorial" />
									</p:column>
								</p:dataTable>

								<p:panel id="resultadoexamenhistorial"
									header="Descripcion examen" style="margin-left:20px">

									<p:inputTextarea id="tfresultadoexamenhistorial"
										value="#{historialController.descripcionExamen}" />

								</p:panel>

							</h:panelGrid>

						</p:tab>

					</p:accordionPanel>

					<p:accordionPanel style="margin-left:20px">

						<p:tab title="Patologia">

							<h:panelGrid id="patolhistorialkk" columns="2">

								<p:dataTable id="tablaExamenHistorial"
									value="#{historialController.patologias}" var="pat" border="1">
									<p:column>
										<f:facet name="header">
					Patologia
				</f:facet>
										<!-- El label es el valor del atributo -->
										<h:outputLabel value="#{pat.nombre}" />
									</p:column>

									<p:column headerText="Opciones">
										<p:commandButton
											action="#{historialController.verSintomas(pat)}"
											process="@this" value="Ver sintomas"
											update="tablaCuentasAsociadas" />
									</p:column>
								</p:dataTable>

								<p:panel id="enfermsintomashistorial" header="Sintomas"
									style="margin-left:20px">

									<p:inputTextarea id="tfdescripcionenfermedadhistorial"
										value="#{historialController.sintomas}" />

								</p:panel>

							</h:panelGrid>

						</p:tab>

					</p:accordionPanel>

				</h:panelGrid>

				<p:accordionPanel>

					<p:tab title="Procedimientos quirugicos">

						<h:panelGrid id="cirugiashistorial" columns="2">

							<p:dataTable id="tablaCirugiaskk"
								value="#{historialController.cirugias}" var="ciru" border="1">
								<p:column>
									<f:facet name="header">
					Cirugia
				</f:facet>
									<!-- El label es el valor del atributo -->
									<h:outputLabel value="#{ciru.descripcion}" />
								</p:column>

								<p:column>
									<f:facet name="header">
					Fecha
				</f:facet>
									<h:outputLabel value="#{ciru.fecha}" />
								</p:column>

								<p:column>
									<f:facet name="header">
					Duracion
				</f:facet>
									<h:outputLabel value="#{ciru.duracion}" />
								</p:column>
							</p:dataTable>

						</h:panelGrid>
					</p:tab>

				</p:accordionPanel>

			</p:panel>
		</h:form>
	</ui:define>
</ui:composition>